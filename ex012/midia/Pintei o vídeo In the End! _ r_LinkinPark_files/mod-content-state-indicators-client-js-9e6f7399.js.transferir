import"./faceplate-tooltip-cd26ff33.js";import{p as t,es as e,bh as s,a_ as o,r as n,h as a,x as i,i as r,c as d,_ as c,n as l,s as p,e as u,u as h,d as m,f as g,a0 as b,ap as y,et as S,w as f,a9 as v,l as z,ar as k,ak as R,g as w,a1 as I}from"./shell-44808257.js";import{i as U}from"./icon-notification-off-outline-68ea6b09.js";import{i as C}from"./icon-overflow-horizontal-outline-24d5d6f3.js";let x=class extends(t(p)){constructor(){super(...arguments),this.status=e.Reported,this.handlePostUpdate=({postId:t,action:o,value:n})=>{t===this.thingId&&o===s.ignoreReports&&(this.status=n?e.Ignored:e.Dismissed)},this.handleCommentUpdate=({commentId:t,action:s,value:n})=>{t===this.thingId&&s===o.ignoreReports&&(this.status=n?e.Ignored:e.Dismissed)}}connectedCallback(){super.connectedCallback(),this.subscribe(n.PostUpdated,this.handlePostUpdate),this.subscribe(n.CommentUpdated,this.handleCommentUpdate)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(n.PostUpdated,this.handlePostUpdate),this.unsubscribe(n.CommentUpdated,this.handleCommentUpdate)}getStyle(){return a({"--list-icon-color":this.status===e.Reported?"var(--shreddit-color-mods-reported-onBackground)":"var(--color-secondary-onBackground)"})}render(){return this.status===e.Reported?i`<div class="bg-mods-reported-background" style="${this.getStyle()}">\n <slot></slot>\n </div>`:i`<details class="max-w-fit bg-secondary-background" style="${this.getStyle()}">\n <summary class="cursor-pointer block list-none"><slot name="${this.status}"></slot></summary>\n <slot></slot>\n </details>`}};x.styles=[r`summary::-webkit-details-marker{display:none}`,d],c([l({type:String,attribute:"thing-id"})],x.prototype,"thingId",void 0),c([l({type:String})],x.prototype,"status",void 0),x=c([u("reports-summary-wrapper")],x);const $=h(p);let E=class extends ${constructor(){super(...arguments),this.contentId="",this.isSnoozed=!1,this.reportReason=""}renderReportOverflowMenu(){return i`\n <faceplate-dropdown-menu position="bottom-end">\n ${m({appearance:"plain",size:g.ExtraSmall,children:C({size:b.ExtraSmall})})}\n <faceplate-menu slot="menu">\n ${y({label:this.isSnoozed?"Remover silenciamento de quem denunciou":"Silenciar quem denunciou",description:this.isSnoozed?"Receber denúncias deste usuário novamente":"Pausar denúncias deste usuário por 7 dias",leadingIcon:U({size:b.Small}),onClick:this.toggleSnooze})}\n </faceplate-menu>\n </faceplate-dropdown-menu>\n `}sendTrackingEvent(t,e,s){const o=s?"snoozereports":"unsnoozereports",n=S(t)?"post":"comment",a=S(t)?t:null,i=S(t)?null:t,r=f({source:"moderator",action:o,noun:n},{...a&&{post:{id:a}},...i&&{comment:{id:i}},...e&&{action_info:{reason:e}}});this.trackEvent(r)}showToast({success:t,isSnoozed:e}){const s=t?e?"Denúncias destes usuários serão pausadas":"Denúncias destes usuários serão retomadas":"Erro ao atualizar denúncias",o=t?v.info:v.error,n=z("faceplate-alert",{level:o,message:s});this.dispatchEvent(n)}async updateReportState(t){try{const{data:e}=await k({operation:R.UpdateReportState,variables:{input:{itemId:this.contentId,reportText:this.reportReason,isSnoozed:t}}});return e?.updateReport?.ok??!1}catch(t){return!1}}async toggleSnooze(t){const e=!this.isSnoozed;this.sendTrackingEvent(this.contentId,this.reportReason,e);const s=await this.updateReportState(e);s&&(this.isSnoozed=e),this.showToast({success:s,isSnoozed:this.isSnoozed})}render(){const t={"flex items-center m-0 p-0":!0,"bg-secondary-background":this.isSnoozed};return i`<li class="${w(t)}">\n <slot \n name="${I(this.isSnoozed?"snoozed":void 0)}" \n class="flex-auto block" \n></slot>\n ${this.renderReportOverflowMenu()}\n </li> `}};E.styles=[d],c([l({type:String,attribute:"content-id"})],E.prototype,"contentId",void 0),c([l({type:Boolean,attribute:"is-snoozed"})],E.prototype,"isSnoozed",void 0),c([l({type:String,attribute:"report-reason"})],E.prototype,"reportReason",void 0),E=c([u("user-report-summary")],E);
//# sourceMappingURL=mod-content-state-indicators-client-js-9e6f7399.js.map
